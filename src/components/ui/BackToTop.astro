---
interface Props {
  threshold?: number;
}

const { threshold = 300 } = Astro.props;
---

<button
  id="back-to-top"
  class="fixed bottom-6 left-6 z-40 w-12 h-12 bg-secondary dark:bg-secondary-dark border-4 border-dark dark:border-light text-dark dark:text-light font-black text-xl shadow-brutal hover:shadow-brutal-hover transition-all transform hover:scale-110 opacity-0 translate-y-10 pointer-events-none"
  aria-label="Back to top"
>
  â†‘
</button>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const backToTopBtn = document.getElementById('back-to-top');
  const threshold = 300;
  
  const toggleBackToTop = () => {
    if (window.scrollY > threshold) {
      backToTopBtn?.classList.remove('opacity-0', 'translate-y-10', 'pointer-events-none');
      backToTopBtn?.classList.add('opacity-100', 'translate-y-0', 'pointer-events-auto');
    } else {
      backToTopBtn?.classList.add('opacity-0', 'translate-y-10', 'pointer-events-none');
      backToTopBtn?.classList.remove('opacity-100', 'translate-y-0', 'pointer-events-auto');
    }
  };
  
  window.addEventListener('scroll', toggleBackToTop);
  
  backToTopBtn?.addEventListener('click', () => {
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  });
  
  toggleBackToTop();
});
</script>
