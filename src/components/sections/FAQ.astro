---
import SectionHeader from '../ui/SectionHeader.astro';
import BrutalCard from '../ui/BrutalCard.astro';
import Heading from '../ui/Heading.astro';
import Text from '../ui/Text.astro';
import BrutalSection from '../ui/BrutalSection.astro';
---

<BrutalSection background="surface" padding="lg" id="faq">
  <div class="max-w-4xl mx-auto px-6">
    <SectionHeader title="FAQ" subtitle="Pertanyaan yang sering ditanyakan" className="mb-8" />
    
    <div class="space-y-4">
      {[
        {
          question: "Apakah pemula boleh bergabung?",
          answer: "Tentu saja! KF13 terbuka untuk semua level. Yang terpenting adalah rasa ingin tahu dan semangat belajar fisika.",
          variant: "primary",
          rotation: "left"
        },
        {
          question: "Apakah ada biaya untuk bergabung?",
          answer: "Tidak ada biaya sama sekali. KF13 adalah komunitas gratis yang fokus pada pembelajaran dan berbagi pengetahuan.",
          variant: "secondary", 
          rotation: "right"
        },
        {
          question: "Seberapa sering kegiatan dilakukan?",
          answer: "Kegiatan rutin dilakukan mingguan untuk diskusi, dan bulanan untuk eksperimen atau workshop khusus.",
          variant: "accent",
          rotation: "left"
        },
        {
          question: "Apa saja yang diperlukan untuk bergabung?",
          answer: "Hanya perlu minat pada fisika dan akses internet. Semua materi pembelajaran akan disediakan oleh komunitas.",
          variant: "secondary",
          rotation: "right"
        },
        {
          question: "Bagaimana cara mengikuti eksperimen?",
          answer: "Eksperimen dirancang dengan alat-alat sederhana yang mudah didapat. Panduan lengkap akan diberikan sebelum kegiatan.",
          variant: "primary",
          rotation: "left"
        },
        {
          question: "Apakah ada sertifikat atau pengakuan?",
          answer: "Fokus kami pada pembelajaran, bukan sertifikat. Namun kontribusi aktif akan mendapat pengakuan dari komunitas.",
          variant: "accent",
          rotation: "right"
        }
      ].map((faq, index) => (
        <BrutalCard variant={faq.variant} rotation={faq.rotation} className="faq-item">
          <button 
            class="w-full p-6 text-left focus:outline-none focus:ring-3 focus:ring-accent faq-trigger"
            aria-expanded="false"
          >
            <div class="flex justify-between items-center">
              <Heading level={3} size="sm" color="white" class="uppercase pr-4">
                {faq.question}
              </Heading>
              <span class="text-2xl font-black text-white faq-icon transition-transform">+</span>
            </div>
          </button>
          <div class="faq-content max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
            <div class="px-6 pb-6">
              <Text color="white" class="font-semibold leading-relaxed">
                {faq.answer}
              </Text>
            </div>
          </div>
        </BrutalCard>
      ))}
    </div>

    <!-- Additional Help -->
    <div class="mt-8 text-center">
      <BrutalCard variant="white" rotation="right" className="inline-block">
        <Text class="font-semibold mb-4">
          ðŸ’¡ <strong>Masih ada pertanyaan lain?</strong>
        </Text>
        <Text size="sm">
          Jangan ragu untuk menghubungi kami melalui email atau media sosial!
        </Text>
      </BrutalCard>
    </div>
  </div>
</BrutalSection>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const faqItems = document.querySelectorAll('.faq-item');
  
  faqItems.forEach(item => {
    const trigger = item.querySelector('.faq-trigger');
    const content = item.querySelector('.faq-content');
    const icon = item.querySelector('.faq-icon');
    
    trigger?.addEventListener('click', () => {
      const isExpanded = trigger.getAttribute('aria-expanded') === 'true';
      
      // Close all other FAQ items
      faqItems.forEach(otherItem => {
        if (otherItem !== item) {
          const otherTrigger = otherItem.querySelector('.faq-trigger');
          const otherContent = otherItem.querySelector('.faq-content');
          const otherIcon = otherItem.querySelector('.faq-icon');
          
          otherTrigger?.setAttribute('aria-expanded', 'false');
          otherContent?.style.setProperty('max-height', '0px');
          otherIcon?.style.setProperty('transform', 'rotate(0deg)');
          if (otherIcon) otherIcon.textContent = '+';
        }
      });
      
      // Toggle current item
      if (isExpanded) {
        trigger.setAttribute('aria-expanded', 'false');
        content?.style.setProperty('max-height', '0px');
        icon?.style.setProperty('transform', 'rotate(0deg)');
        if (icon) icon.textContent = '+';
      } else {
        trigger.setAttribute('aria-expanded', 'true');
        content?.style.setProperty('max-height', content.scrollHeight + 'px');
        icon?.style.setProperty('transform', 'rotate(45deg)');
        if (icon) icon.textContent = 'Ã—';
      }
    });
  });
});
</script>
