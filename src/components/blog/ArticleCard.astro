---
import type { ArticleCardProps } from "@types/blog";

const { post, index }: ArticleCardProps = Astro.props;

const getCardVariant = (category: string) => {
  switch (category.toLowerCase()) {
    case 'tutorial': return 'secondary';
    case 'eksperimen': return 'accent';
    default: return 'primary';
  }
};

const getRotation = () => Math.random() > 0.5 ? 'rotate-1' : '-rotate-1';
---

<article data-article={post.category} data-tags={post.tags.join(',')} tabindex="0" role="article" aria-labelledby={`article-title-${index}`}>
  <div class={`btn-${getCardVariant(post.category)} p-6 transform ${getRotation()} hover:rotate-0 border-4 border-dark dark:border-light shadow-brutal-sm transition-transform hover:scale-105 focus-within:scale-105 relative data-article`}>
    <div class="mb-4">
      <span class="bg-white text-dark px-3 py-1 text-xs font-bold border-2 border-dark">
        {post.category?.toUpperCase() || 'ARTIKEL'}
      </span>
    </div>
    <a href={`/blog/${post.slug}`} class="block hover:scale-105 transition-transform focus:outline-none focus:ring-4 focus:ring-white focus:ring-offset-4 focus:ring-offset-current" aria-label={`Baca artikel: ${post.title}`}>
      <h3 id={`article-title-${index}`} class="text-lg font-black uppercase text-white mb-3 leading-tight">
        {post.title}
      </h3>
    </a>
    <p class="text-white text-sm leading-relaxed mb-4">
      {post.excerpt}
    </p>
    <div class="space-y-2 text-white text-xs mb-4" role="group" aria-label="Informasi artikel">
      <div>ğŸ‘¨ğŸ« {post.author}</div>
      <div>ğŸ“… {post.date}</div>
      <div>â±ï¸ {post.readTime}</div>
      <div>ğŸ‘ï¸ {post.views} views</div>
    </div>
    <a 
      href={`/blog/${post.slug}`}
      class="bg-white text-dark px-4 py-2 font-bold text-sm border-2 border-dark hover:scale-105 transition-transform w-full block text-center focus:outline-none focus:ring-4 focus:ring-offset-4 focus:ring-offset-current"
      aria-label={`Baca selengkapnya: ${post.title}`}
    >
      BACA SELENGKAPNYA
    </a>
  </div>
</article>
