---
import type { ArticleCardProps } from "@types/blog";

const { post, index }: ArticleCardProps = Astro.props;

const getCardVariant = (category: string) => {
  switch (category.toLowerCase()) {
    case 'tutorial': return 'secondary';
    case 'eksperimen': return 'accent';
    default: return 'primary';
  }
};

const getRotation = () => Math.random() > 0.5 ? 'rotate-1' : '-rotate-1';
---

<article data-article={post.category} data-tags={post.tags.join(',')}>
  <a 
    href={`/blog/${post.slug}`} 
    class={`block btn-${getCardVariant(post.category)} p-6 transform ${getRotation()} hover:rotate-0 border-4 border-dark dark:border-light shadow-brutal-sm transition-transform hover:scale-105 focus:scale-105 focus:outline-none focus:ring-4 focus:ring-primary/50`}
    aria-labelledby={`article-title-${index}`}
  >
    <div class="mb-4">
      <span class="bg-white text-dark px-3 py-1 text-xs font-bold border-2 border-dark">
        {post.category?.toUpperCase() || 'ARTIKEL'}
      </span>
    </div>
    <h3 id={`article-title-${index}`} class="text-lg font-black uppercase text-white mb-3 leading-tight">
      {post.title}
    </h3>
    <p class="text-white text-sm leading-relaxed mb-4">
      {post.excerpt}
    </p>
    <div class="flex items-center justify-between text-white text-xs">
      <span>ğŸ‘¨ğŸ« {post.author}</span>
      <span>ğŸ“… {post.date}</span>
      <span>â±ï¸ {post.readTime}</span>
    </div>
  </a>
</article>
