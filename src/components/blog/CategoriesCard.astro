---
import BrutalCard from "../ui/BrutalCard.astro";
import Heading from "../ui/Heading.astro";

interface Props {
  categories: Array<{ name: string; slug: string; count: number }>;
}

const { categories } = Astro.props;

const categoriesWithAll = [
  { name: "Semua", slug: "all", count: categories.reduce((sum, cat) => sum + cat.count, 0), active: true },
  ...categories.map(cat => ({ ...cat, active: false }))
];
---

<BrutalCard variant="surface" size="sm" rotation="left">
  <Heading level={2} size="lg" weight="extrabold" color="primary" class="mb-6 transform rotate-1">
    ðŸ“‚ KATEGORI
  </Heading>
  <nav role="navigation" aria-label="Filter kategori artikel">
    <div class="space-y-2" role="group" aria-label="Pilihan kategori artikel">
      {categoriesWithAll.map((category) => (
        <button 
          class={`w-full text-left px-3 py-2 text-sm font-bold border-2 border-dark dark:border-light transition-all hover:scale-105 focus:outline-none focus:ring-4 focus:ring-primary/50 ${
            category.active 
              ? 'bg-primary text-on-primary' 
              : 'bg-surface dark:bg-surface-dark text-dark dark:text-light hover:bg-primary hover:text-on-primary'
          }`}
          data-category={category.slug}
          aria-pressed={category.active ? 'true' : 'false'}
          aria-label={`Filter artikel kategori ${category.name}`}
        >
          <span class="flex justify-between items-center">
            <span>{category.name}</span>
            <span class="text-xs opacity-75">({category.count})</span>
          </span>
        </button>
      ))}
    </div>
  </nav>
  <div id="filter-results" aria-live="polite" aria-atomic="true" class="sr-only"></div>
</BrutalCard>
