---
import PlatformLayout from '@layouts/PlatformLayout.astro';
import { RANKS, EMOTICONS } from '@lib/kaskus';
---

<script>
  import { redirectIfGuest } from '../../../lib/router';
  redirectIfGuest();
</script>

<PlatformLayout title="Diskusi" activeNav="/platform/discussions">
  <!-- Header ala Kaskus -->
  <div class="bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-t-xl p-4 flex items-center justify-between">
    <div class="flex items-center gap-3">
      <span class="text-3xl">ğŸ’¬</span>
      <div>
        <h1 class="text-xl font-bold">Forum Diskusi Fisika</h1>
        <p class="text-sm opacity-90">Pair of Minds, Pair of Hands</p>
      </div>
    </div>
    <button class="bg-white text-green-700 px-4 py-2 rounded-lg text-sm font-bold hover:bg-green-50">
      + BIKIN THREAD
    </button>
  </div>

  <!-- Subforum Navigation -->
  <div class="bg-white border-x border-b rounded-b-xl mb-4 overflow-x-auto">
    <div class="flex divide-x text-sm">
      <a href="#" class="px-4 py-3 bg-green-50 text-green-700 font-bold border-b-2 border-green-600">ğŸ  Semua</a>
      <a href="#" class="px-4 py-3 hover:bg-gray-50 text-gray-600">âš›ï¸ Fisika Modern</a>
      <a href="#" class="px-4 py-3 hover:bg-gray-50 text-gray-600">ğŸ”§ Mekanika</a>
      <a href="#" class="px-4 py-3 hover:bg-gray-50 text-gray-600">ğŸ† Olimpiade</a>
      <a href="#" class="px-4 py-3 hover:bg-gray-50 text-gray-600">ğŸ’¼ Karir & Kuliah</a>
      <a href="#" class="px-4 py-3 hover:bg-gray-50 text-gray-600">ğŸ® Lounge</a>
    </div>
  </div>

  <!-- Thread List -->
  <div class="bg-white rounded-xl border overflow-hidden">
    <!-- Table Header -->
    <div class="bg-gray-100 px-4 py-2 grid grid-cols-12 gap-4 text-xs font-bold text-gray-600 border-b">
      <div class="col-span-7">TOPIK</div>
      <div class="col-span-2 text-center">PENULIS</div>
      <div class="col-span-1 text-center">REPLY</div>
      <div class="col-span-2 text-center">AKTIVITAS</div>
    </div>

    <!-- Sticky Thread -->
    <div class="grid grid-cols-12 gap-4 p-4 border-b bg-yellow-50 hover:bg-yellow-100">
      <div class="col-span-7">
        <div class="flex items-center gap-2 mb-1">
          <span class="bg-red-500 text-white text-xs px-2 py-0.5 rounded font-bold">ğŸ“Œ STICKY</span>
          <span class="bg-purple-100 text-purple-700 text-xs px-2 py-0.5 rounded">HOT THREAD ğŸ”¥</span>
        </div>
        <a href="#" class="font-bold text-blue-800 hover:text-blue-600 hover:underline">
          [MEGATHREAD] Persiapan OSN Fisika 2026 - Tips, Materi, dan Diskusi
        </a>
        <div class="flex gap-2 mt-1">
          <span class="text-xs bg-gray-200 px-2 py-0.5 rounded">olimpiade</span>
          <span class="text-xs bg-gray-200 px-2 py-0.5 rounded">osn</span>
        </div>
      </div>
      <div class="col-span-2 text-center">
        <div class="text-sm font-medium text-blue-600">moderator</div>
        <div class="text-xs text-green-600">Kaskus Geek</div>
      </div>
      <div class="col-span-1 text-center">
        <div class="font-bold">234</div>
        <div class="text-xs text-gray-500">reply</div>
      </div>
      <div class="col-span-2 text-center text-xs text-gray-500">
        <div>2 jam lalu</div>
        <div class="text-blue-600">oleh @ahmad</div>
      </div>
    </div>

    <!-- Regular Thread 1 -->
    <div class="grid grid-cols-12 gap-4 p-4 border-b hover:bg-gray-50">
      <div class="col-span-7">
        <div class="flex items-center gap-2 mb-1">
          <span class="text-green-500 text-lg">ğŸ¥’</span>
          <span class="text-xs text-green-600 font-bold">+89</span>
        </div>
        <a href="/platform/discussions/thread" class="font-bold text-blue-800 hover:text-blue-600 hover:underline">
          [SHARE] Berhasil bikin interferometer Michelson dari cermin bekas! (Pic Inside)
        </a>
        <p class="text-sm text-gray-500 mt-1">Setelah 2 minggu trial error, akhirnya dapet pola interferensi yang bagus gan...</p>
        <div class="flex gap-2 mt-1">
          <span class="text-xs bg-gray-200 px-2 py-0.5 rounded">eksperimen</span>
          <span class="text-xs bg-gray-200 px-2 py-0.5 rounded">optik</span>
        </div>
      </div>
      <div class="col-span-2 text-center">
        <div class="w-10 h-10 bg-blue-500 rounded mx-auto mb-1 flex items-center justify-center text-white font-bold">B</div>
        <div class="text-sm font-medium text-blue-600">budi_fisika</div>
        <div class="text-xs text-purple-600">Kaskus Holic</div>
        <div class="text-xs text-gray-400">156 posts</div>
      </div>
      <div class="col-span-1 text-center">
        <div class="font-bold">67</div>
        <div class="text-xs text-gray-500">reply</div>
      </div>
      <div class="col-span-2 text-center text-xs text-gray-500">
        <div>5 jam lalu</div>
        <div class="text-blue-600">oleh @newbie</div>
      </div>
    </div>

    <!-- Regular Thread 2 -->
    <div class="grid grid-cols-12 gap-4 p-4 border-b hover:bg-gray-50">
      <div class="col-span-7">
        <div class="flex items-center gap-2 mb-1">
          <span class="text-green-500 text-lg">ğŸ¥’</span>
          <span class="text-xs text-green-600 font-bold">+45</span>
          <span class="bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded">âœ“ SOLVED</span>
        </div>
        <a href="#" class="font-bold text-blue-800 hover:text-blue-600 hover:underline">
          [ASK] Kenapa momentum angular kekal tapi energi kinetik tidak pada tumbukan?
        </a>
        <p class="text-sm text-gray-500 mt-1">Agan2 sekalian, ane bingung nih sama konsep ini...</p>
        <div class="flex gap-2 mt-1">
          <span class="text-xs bg-gray-200 px-2 py-0.5 rounded">mekanika</span>
          <span class="text-xs bg-gray-200 px-2 py-0.5 rounded">tanya</span>
        </div>
      </div>
      <div class="col-span-2 text-center">
        <div class="w-10 h-10 bg-gray-400 rounded mx-auto mb-1 flex items-center justify-center text-white font-bold">N</div>
        <div class="text-sm font-medium text-blue-600">newbie_phy</div>
        <div class="text-xs text-gray-500">Newbie</div>
        <div class="text-xs text-gray-400">3 posts</div>
      </div>
      <div class="col-span-1 text-center">
        <div class="font-bold">12</div>
        <div class="text-xs text-gray-500">reply</div>
      </div>
      <div class="col-span-2 text-center text-xs text-gray-500">
        <div>1 hari lalu</div>
        <div class="text-blue-600">oleh @siti</div>
      </div>
    </div>

    <!-- Regular Thread 3 -->
    <div class="grid grid-cols-12 gap-4 p-4 border-b hover:bg-gray-50">
      <div class="col-span-7">
        <div class="flex items-center gap-2 mb-1">
          <span class="text-green-500 text-lg">ğŸ¥’</span>
          <span class="text-xs text-green-600 font-bold">+32</span>
        </div>
        <a href="#" class="font-bold text-blue-800 hover:text-blue-600 hover:underline">
          [SHARE] Pengalaman apply PhD Physics di luar negeri - AMA
        </a>
        <p class="text-sm text-gray-500 mt-1">Baru diterima di program PhD gan. Mau share pengalaman dari persiapan...</p>
        <div class="flex gap-2 mt-1">
          <span class="text-xs bg-gray-200 px-2 py-0.5 rounded">karir</span>
          <span class="text-xs bg-gray-200 px-2 py-0.5 rounded">phd</span>
        </div>
      </div>
      <div class="col-span-2 text-center">
        <div class="w-10 h-10 bg-orange-500 rounded mx-auto mb-1 flex items-center justify-center text-white font-bold">P</div>
        <div class="text-sm font-medium text-blue-600">phd_bound</div>
        <div class="text-xs text-orange-600">Kaskus Addict</div>
        <div class="text-xs text-gray-400">312 posts</div>
      </div>
      <div class="col-span-1 text-center">
        <div class="font-bold">89</div>
        <div class="text-xs text-gray-500">reply</div>
      </div>
      <div class="col-span-2 text-center text-xs text-gray-500">
        <div>2 hari lalu</div>
        <div class="text-blue-600">oleh @dewi</div>
      </div>
    </div>

    <!-- Thread with Bata -->
    <div class="grid grid-cols-12 gap-4 p-4 border-b hover:bg-gray-50 bg-red-50">
      <div class="col-span-7">
        <div class="flex items-center gap-2 mb-1">
          <span class="text-red-500 text-lg">ğŸ§±</span>
          <span class="text-xs text-red-600 font-bold">-15</span>
          <span class="bg-red-100 text-red-700 text-xs px-2 py-0.5 rounded">KONTROVERSI</span>
        </div>
        <a href="#" class="font-bold text-blue-800 hover:text-blue-600 hover:underline">
          [DEBAT] Flat Earth itu bener gak sih? Serius nanya
        </a>
        <p class="text-sm text-gray-500 mt-1">Ane penasaran aja gan, kan banyak yang bilang...</p>
      </div>
      <div class="col-span-2 text-center">
        <div class="w-10 h-10 bg-gray-400 rounded mx-auto mb-1 flex items-center justify-center text-white font-bold">?</div>
        <div class="text-sm font-medium text-blue-600">curious123</div>
        <div class="text-xs text-gray-500">Newbie</div>
      </div>
      <div class="col-span-1 text-center">
        <div class="font-bold text-red-600">156</div>
        <div class="text-xs text-gray-500">reply</div>
      </div>
      <div class="col-span-2 text-center text-xs text-gray-500">
        <div>3 hari lalu</div>
        <div class="text-red-600">ğŸ”’ LOCKED</div>
      </div>
    </div>
  </div>

  <!-- Pagination Kaskus Style -->
  <div class="flex items-center justify-between mt-4 text-sm">
    <div class="text-gray-500">Menampilkan 1-20 dari 1,234 thread</div>
    <div class="flex gap-1">
      <span class="px-3 py-1 bg-green-600 text-white rounded">1</span>
      <a href="#" class="px-3 py-1 bg-white border rounded hover:bg-gray-50">2</a>
      <a href="#" class="px-3 py-1 bg-white border rounded hover:bg-gray-50">3</a>
      <span class="px-3 py-1">...</span>
      <a href="#" class="px-3 py-1 bg-white border rounded hover:bg-gray-50">62</a>
      <a href="#" class="px-3 py-1 bg-white border rounded hover:bg-gray-50">Â»</a>
    </div>
  </div>

  <!-- Emoticon Legend -->
  <div class="mt-6 bg-white rounded-xl border p-4">
    <h3 class="font-bold text-sm mb-2">ğŸ˜€ Emoticon Forum:</h3>
    <div class="flex flex-wrap gap-3 text-sm">
      {Object.entries(EMOTICONS).map(([code, emoji]) => (
        <span class="bg-gray-100 px-2 py-1 rounded" title={code}>
          {emoji} <code class="text-xs text-gray-500">{code}</code>
        </span>
      ))}
    </div>
  </div>
</PlatformLayout>
