---
import "@/styles/main.css";
import BaseHead from "../components/BaseHead.astro";
import Navigation from "../components/Navigation.astro";
import Footer from "../components/sections/Footer.astro";
import FloatingActions from "../components/ui/FloatingActions.astro";
import BackToTop from "../components/ui/BackToTop.astro";
import SectionHeaderWithHash from "../components/ui/SectionHeaderWithHash.astro";
import BrutalInput from "../components/ui/BrutalInput.astro";
import BrutalButton from "../components/ui/BrutalButton.astro";
import BrutalCard from "../components/ui/BrutalCard.astro";
import Heading from "../components/ui/Heading.astro";
import Text from "../components/ui/Text.astro";
import BrutalSection from "../components/ui/BrutalSection.astro";
import GradientSection from "../components/ui/GradientSection.astro";
---

<!doctype html>
<html lang="id" class="scroll-smooth">
    <head>
        <BaseHead 
            title="Blog & Artikel - KF13 Klub Fisika Indonesia" 
            description="Artikel fisika, tutorial eksperimen, tips belajar, dan berita terbaru dari komunitas KF13 Klub Fisika Indonesia"
        />
        <script>
        </script>
    </head>
    <body class="font-sans bg-surface dark:bg-surface-dark text-dark dark:text-light transition-colors">
        <Navigation />
        <FloatingActions />
        <BackToTop threshold={300} />
        
        <main class="pt-20">
            <!-- Hero Section -->
            <GradientSection variant="green-blue">
                <div class="max-w-6xl mx-auto px-6 text-center">
                    <Heading level={1} size="3xl" class="uppercase tracking-tight transform -rotate-1 mb-8">
                        BLOG & <span class="text-primary dark:text-primary-dark">ARTIKEL</span>
                    </Heading>
                    <BrutalCard variant="white" class="transform rotate-1 max-w-2xl mx-auto">
                        <Text size="lg" class="font-bold mb-4">
                            üìö Pusat Pengetahuan Fisika Indonesia
                        </Text>
                        <Text class="font-semibold">
                            Artikel fisika, tutorial eksperimen, tips belajar, dan berita terbaru dari komunitas KF13. 
                            Belajar fisika jadi lebih mudah dan menyenangkan!
                        </Text>
                    </BrutalCard>
                </div>
            </GradientSection>

            <!-- Main Content with Sidebar -->
            <BrutalSection background="white" padding="xl">
                <div class="max-w-7xl mx-auto">
                    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
                        <!-- Sidebar -->
                        <aside class="lg:col-span-1 space-y-6" role="complementary" aria-label="Sidebar navigasi blog">
                            <!-- Search -->
                            <BrutalCard background="surface" class="sticky top-24">
                                <Heading level="h2" size="lg" weight="black" color="primary" class="mb-4">
                                    üîç CARI ARTIKEL
                                </Heading>
                                <form role="search" aria-label="Pencarian artikel" class="space-y-3">
                                    <label for="search-input" class="sr-only">Cari artikel fisika</label>
                                    <BrutalInput 
                                        type="text" 
                                        placeholder="Cari topik fisika..." 
                                        id="search-input"
                                        aria-label="Masukkan kata kunci pencarian artikel"
                                        aria-describedby="search-help"
                                    />
                                    <div id="search-help" class="sr-only">
                                        Ketik kata kunci untuk mencari artikel fisika, tutorial, atau eksperimen
                                    </div>
                                    <BrutalButton 
                                        variant="primary" 
                                        class="w-full"
                                        type="submit"
                                        aria-label="Mulai pencarian artikel"
                                    >
                                        CARI
                                    </BrutalButton>
                                </form>
                                <!-- Live region for search results -->
                                <div id="search-results" aria-live="polite" aria-atomic="true" class="sr-only"></div>
                            </BrutalCard>

                            <!-- Categories -->
                            <BrutalCard background="accent">
                                <Heading level="h2" size="lg" weight="black" color="primary" class="mb-4">
                                    üìÇ KATEGORI
                                </Heading>
                                <nav role="navigation" aria-label="Filter kategori artikel">
                                    <div class="space-y-2" role="group" aria-label="Pilihan kategori artikel">
                                        {[
                                            { name: "Semua", slug: "all", active: true },
                                            { name: "Tutorial", slug: "tutorial" },
                                            { name: "Eksperimen", slug: "eksperimen" },
                                            { name: "Teori", slug: "teori" },
                                            { name: "Tips Belajar", slug: "tips" },
                                            { name: "Berita", slug: "berita" }
                                        ].map((category) => (
                                            <button 
                                                class={`w-full text-left px-3 py-2 text-sm font-bold border-2 border-dark dark:border-light transition-all hover:scale-105 focus:outline-none focus:ring-4 focus:ring-primary/50 ${
                                                    category.active 
                                                        ? 'bg-primary text-white' 
                                                        : 'bg-white text-dark hover:bg-primary hover:text-white'
                                                }`}
                                                data-category={category.slug}
                                                aria-pressed={category.active ? 'true' : 'false'}
                                                aria-label={`Filter artikel kategori ${category.name}`}
                                            >
                                                {category.name}
                                            </button>
                                        ))}
                                    </div>
                                </nav>
                                <!-- Live region for filter results -->
                                <div id="filter-results" aria-live="polite" aria-atomic="true" class="sr-only"></div>
                            </BrutalCard>

                            <!-- Popular Tags -->
                            <BrutalCard background="primary">
                                <Heading level="h2" size="lg" weight="black" color="white" class="mb-4">
                                    üè∑Ô∏è TAG POPULER
                                </Heading>
                                <nav role="navigation" aria-label="Tag artikel populer">
                                    <div class="flex flex-wrap gap-2" role="group" aria-label="Daftar tag artikel">
                                        {[
                                            { name: "Fisika Kuantum", count: 12 },
                                            { name: "Eksperimen", count: 8 },
                                            { name: "Newton", count: 6 },
                                            { name: "Relativitas", count: 4 },
                                            { name: "Gelombang", count: 7 },
                                            { name: "Optik", count: 5 },
                                            { name: "Termodinamika", count: 3 }
                                        ].map((tag) => (
                                            <button 
                                                class={`px-2 py-1 text-xs font-bold border border-white text-white hover:bg-white hover:text-primary transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-primary ${
                                                    tag.count > 6 ? 'text-sm' : tag.count > 4 ? 'text-xs' : 'text-xs opacity-75'
                                                }`}
                                                aria-label={`Filter artikel dengan tag ${tag.name}, ${tag.count} artikel`}
                                                title={`${tag.count} artikel dengan tag ${tag.name}`}
                                            >
                                                {tag.name} ({tag.count})
                                            </button>
                                        ))}
                                    </div>
                                </nav>
                            </BrutalCard>

                            <!-- Recent Articles -->
                            <BrutalCard background="white">
                                <Heading level="h2" size="lg" weight="black" color="primary" class="mb-4">
                                    üì∞ ARTIKEL TERBARU
                                </Heading>
                                <nav role="navigation" aria-label="Artikel terbaru">
                                    <ul class="space-y-3" role="list">
                                        {[
                                            { title: "Hukum Termodinamika dalam Kehidupan", date: "23 Des 2024", readTime: "4 min" },
                                            { title: "Eksperimen Listrik Statis Sederhana", date: "22 Des 2024", readTime: "6 min" },
                                            { title: "Memahami Spektrum Cahaya", date: "21 Des 2024", readTime: "5 min" }
                                        ].map((article) => (
                                            <li role="listitem">
                                                <a 
                                                    href="#" 
                                                    class="block border-l-4 border-primary pl-3 hover:bg-surface transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"
                                                    aria-label={`Baca artikel: ${article.title}, dipublikasi ${article.date}, estimasi baca ${article.readTime}`}
                                                >
                                                    <Text size="sm" weight="bold" class="mb-1 hover:text-primary">
                                                        {article.title}
                                                    </Text>
                                                    <div class="flex items-center gap-2 text-xs opacity-75">
                                                        <time datetime={article.date} aria-label={`Dipublikasi ${article.date}`}>
                                                            üìÖ {article.date}
                                                        </time>
                                                        <span aria-label={`Estimasi waktu baca ${article.readTime}`}>
                                                            ‚è±Ô∏è {article.readTime}
                                                        </span>
                                                    </div>
                                                </a>
                                            </li>
                                        ))}
                                    </ul>
                                </nav>
                            </BrutalCard>

                            <!-- Blog Stats -->
                            <BrutalCard background="accent">
                                <Heading level="h2" size="lg" weight="black" color="primary" class="mb-4">
                                    üìä STATISTIK BLOG
                                </Heading>
                                <div class="space-y-3" role="region" aria-label="Statistik blog KF13">
                                    <div class="flex justify-between items-center">
                                        <Text size="sm" weight="bold">Total Artikel:</Text>
                                        <Text size="sm" weight="black" color="primary" aria-label="127 total artikel">127</Text>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <Text size="sm" weight="bold">Total Pembaca:</Text>
                                        <Text size="sm" weight="black" color="primary" aria-label="15.200 total pembaca">15.2K</Text>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <Text size="sm" weight="bold">Artikel Bulan Ini:</Text>
                                        <Text size="sm" weight="black" color="primary" aria-label="8 artikel bulan ini">8</Text>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <Text size="sm" weight="bold">Kategori Aktif:</Text>
                                        <Text size="sm" weight="black" color="primary" aria-label="6 kategori aktif">6</Text>
                                    </div>
                                </div>
                            </BrutalCard>

                            <!-- Newsletter -->
                            <BrutalCard background="secondary">
                                <Heading level="h2" size="lg" weight="black" color="primary" class="mb-4">
                                    üìß NEWSLETTER
                                </Heading>
                                <Text size="sm" class="mb-4">
                                    Dapatkan artikel terbaru langsung di email!
                                </Text>
                                <form class="space-y-3" aria-label="Berlangganan newsletter KF13">
                                    <label for="newsletter-email" class="sr-only">
                                        Alamat email untuk berlangganan newsletter
                                    </label>
                                    <BrutalInput 
                                        type="email" 
                                        placeholder="email@example.com"
                                        id="newsletter-email"
                                        required
                                        aria-label="Masukkan alamat email Anda"
                                        aria-describedby="newsletter-help newsletter-privacy"
                                    />
                                    <div id="newsletter-help" class="sr-only">
                                        Masukkan alamat email valid untuk menerima artikel fisika terbaru
                                    </div>
                                    <BrutalButton 
                                        variant="primary" 
                                        type="submit" 
                                        class="w-full"
                                        aria-label="Berlangganan newsletter KF13"
                                    >
                                        BERLANGGANAN
                                    </BrutalButton>
                                </form>
                                <Text size="xs" color="muted" class="mt-2" id="newsletter-privacy">
                                    Gratis, tanpa spam, bisa unsubscribe kapan saja
                                </Text>
                                <!-- Success/Error messages -->
                                <div id="newsletter-status" aria-live="polite" aria-atomic="true" class="sr-only"></div>
                            </BrutalCard>
                        </aside>

                        <!-- Main Content -->
                        <main class="lg:col-span-3">
                            <SectionHeaderWithHash 
                                id="articles"
                                title="‚≠ê ARTIKEL TERBARU" 
                                subtitle="Konten terpopuler dan terbaru dari komunitas"
                                class="mb-8"
                            />
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-16">
                        <!-- Main Featured Article -->
                        <div class="lg:col-span-2">
                            <article class="bg-primary dark:bg-slate-600 border-4 border-dark dark:border-light p-8 transform -rotate-1 hover:rotate-0 transition-transform shadow-brutal">
                                <div class="flex flex-wrap gap-2 mb-4">
                                    <span class="bg-white text-dark px-3 py-1 text-xs font-bold border-2 border-dark">TUTORIAL</span>
                                    <span class="bg-white text-dark px-3 py-1 text-xs font-bold border-2 border-dark">POPULER</span>
                                </div>
                                <h2 class="text-3xl md:text-4xl font-black uppercase text-on-primary mb-4 leading-tight">
                                    Cara Mudah Memahami Hukum Newton dengan Eksperimen Sederhana
                                </h2>
                                <p class="text-on-primary opacity-90 text-lg leading-relaxed mb-6">
                                    Pelajari ketiga hukum Newton melalui eksperimen yang bisa dilakukan di rumah menggunakan bahan-bahan sederhana. 
                                    Dari mobil-mobilan hingga balon, fisika jadi lebih mudah dipahami!
                                </p>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-4 text-on-primary opacity-80 text-sm">
                                        <span>üë®‚Äçüî¨ Dr. Ahmad Fisika</span>
                                        <span>üìÖ 20 Desember 2024</span>
                                        <span>‚è±Ô∏è 8 menit baca</span>
                                    </div>
                                    <button class="bg-white text-dark px-6 py-3 font-black border-2 border-dark hover:scale-105 transition-transform">
                                        BACA ARTIKEL
                                    </button>
                                </div>
                            </article>
                        </div>
                    </div>

                    <!-- Article Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        {[
                            {
                                title: "Fisika Kuantum untuk Pemula: Memahami Dunia Atom",
                                excerpt: "Pelajari konsep dasar fisika kuantum dengan cara yang mudah dipahami, mulai dari dualitas gelombang-partikel hingga prinsip ketidakpastian Heisenberg.",
                                category: "Teori",
                                author: "Dr. Sarah Quantum",
                                date: "20 Desember 2024",
                                readTime: "8 menit",
                                bg: "btn-primary",
                                categoryBg: "bg-white text-on-light",
                                link: "/blog/fisika-kuantum-untuk-pemula"
                            },
                            {
                                title: "Eksperimen Gelombang Bunyi yang Bisa Dilakukan di Rumah",
                                excerpt: "Panduan lengkap melakukan eksperimen gelombang bunyi menggunakan alat-alat sederhana yang ada di rumah.",
                                category: "Eksperimen",
                                author: "Budi Eksperimen",
                                date: "18 Desember 2024",
                                readTime: "6 menit",
                                bg: "btn-accent",
                                categoryBg: "bg-white text-on-light",
                                link: "/blog/eksperimen-gelombang-bunyi-sederhana"
                            },
                            {
                                title: "7 Tips Belajar Fisika yang Efektif untuk Siswa SMA",
                                excerpt: "Strategi pembelajaran fisika yang terbukti efektif untuk meningkatkan pemahaman dan nilai ujian.",
                                category: "Tips Belajar",
                                author: "Ahmad Belajar",
                                date: "15 Desember 2024",
                                readTime: "5 menit",
                                bg: "btn-secondary",
                                categoryBg: "bg-white text-on-light",
                                link: "/blog/tips-belajar-fisika-efektif"
                            },
                            {
                                title: "Roket Air: Prinsip Fisika di Balik Peluncuran Sederhana",
                                excerpt: "Memahami hukum Newton ketiga melalui pembuatan dan peluncuran roket air",
                                category: "Tutorial",
                                author: "Dr. Ahmad Fisika",
                                date: "10 Desember 2024",
                                readTime: "7 menit",
                                bg: "bg-blue",
                                categoryBg: "bg-blue-200"
                            },
                            {
                                title: "KF13 Raih Juara 1 Kompetisi Fisika Nasional 2024",
                                excerpt: "Tim KF13 berhasil meraih prestasi gemilang dalam kompetisi fisika tingkat nasional",
                                category: "Berita",
                                author: "Tim KF13",
                                date: "8 Desember 2024",
                                readTime: "5 menit",
                                bg: "bg-pink",
                                categoryBg: "bg-pink-200"
                            },
                            {
                                title: "Memahami Relativitas Einstein dengan Analogi Sederhana",
                                excerpt: "Konsep ruang-waktu dan relativitas khusus dijelaskan dengan analogi yang mudah dipahami",
                                category: "Teori",
                                author: "Sarah Quantum",
                                date: "5 Desember 2024",
                                readTime: "14 menit",
                                bg: "bg-purple-500",
                                categoryBg: "bg-purple-200"
                            }
                        ].map((article, index) => (
                            <BrutalCard 
                                variant={article.bg === 'btn-primary' ? 'primary' : article.bg === 'btn-secondary' ? 'secondary' : 'accent'}
                                rotation={index % 2 === 0 ? 'right' : 'left'}
                                class="data-article"
                                data-article={article.category.toLowerCase()}
                            >
                                <div class="mb-4">
                                    <span class={`${article.categoryBg} px-3 py-1 text-xs font-bold border-2 border-dark`}>
                                        {article.category.toUpperCase()}
                                    </span>
                                </div>
                                
                                <a 
                                    href={article.link || "#"}
                                    class="block hover:scale-105 transition-transform"
                                >
                                    <h3 class="text-lg font-black uppercase text-on-primary mb-3 leading-tight">
                                        {article.title}
                                    </h3>
                                </a>
                                
                                <p class="text-on-primary opacity-90 text-sm leading-relaxed mb-4">
                                    {article.excerpt}
                                </p>
                                
                                <div class="space-y-2 text-on-primary opacity-80 text-xs mb-4">
                                    <div>üë®‚Äçüè´ {article.author}</div>
                                    <div>üìÖ {article.date}</div>
                                    <div>‚è±Ô∏è {article.readTime} baca</div>
                                </div>
                                
                                <a 
                                    href={article.link || "#"}
                                    class="bg-white text-on-light px-4 py-2 font-bold text-sm border-2 border-dark hover:scale-105 transition-transform w-full block text-center"
                                >
                                    BACA SELENGKAPNYA
                                </a>
                            </BrutalCard>
                        ))}
                    </div>

                            <!-- Load More -->
                            <div class="text-center mt-16">
                                <BrutalButton variant="accent" class="transform rotate-1 hover:rotate-0">
                                    üìö MUAT ARTIKEL LAINNYA
                                </BrutalButton>
                            </div>
                        </main>
                    </div>
                </div>
            </BrutalSection>
        </main>

        <Footer />

        <script>
            // Enhanced WCAG-compliant functionality
            document.addEventListener('DOMContentLoaded', () => {
                const searchInput = document.getElementById('search-input');
                const articles = document.querySelectorAll('[data-article]');
                const categoryButtons = document.querySelectorAll('[data-category]');
                const searchResults = document.getElementById('search-results');
                const filterResults = document.getElementById('filter-results');
                
                // Enhanced search functionality with accessibility
                searchInput?.addEventListener('input', (e) => {
                    const query = e.target.value.toLowerCase();
                    let visibleCount = 0;
                    
                    articles.forEach(article => {
                        const title = article.querySelector('h3')?.textContent.toLowerCase() || '';
                        const excerpt = article.querySelector('p')?.textContent.toLowerCase() || '';
                        const category = article.getAttribute('data-article') || '';
                        
                        const matches = title.includes(query) || excerpt.includes(query) || category.includes(query);
                        article.style.display = matches ? 'block' : 'none';
                        
                        if (matches) visibleCount++;
                    });
                    
                    // Update screen reader with results
                    if (searchResults) {
                        const message = query 
                            ? `Ditemukan ${visibleCount} artikel yang cocok dengan pencarian "${query}"`
                            : 'Menampilkan semua artikel';
                        searchResults.textContent = message;
                    }
                });
                
                // Enhanced category filter with ARIA states
                categoryButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        // Update ARIA states
                        categoryButtons.forEach(btn => {
                            btn.setAttribute('aria-pressed', 'false');
                            btn.classList.remove('bg-primary', 'text-white');
                            btn.classList.add('bg-white', 'text-dark');
                        });
                        
                        // Set active state
                        button.setAttribute('aria-pressed', 'true');
                        button.classList.remove('bg-white', 'text-dark');
                        button.classList.add('bg-primary', 'text-white');
                        
                        const category = button.getAttribute('data-category');
                        let visibleCount = 0;
                        
                        articles.forEach(article => {
                            const articleCategory = article.getAttribute('data-article');
                            const matches = category === 'all' || articleCategory === category;
                            article.style.display = matches ? 'block' : 'none';
                            
                            if (matches) visibleCount++;
                        });
                        
                        // Update screen reader with filter results
                        if (filterResults) {
                            const categoryName = button.textContent;
                            const message = category === 'all' 
                                ? `Menampilkan semua ${visibleCount} artikel`
                                : `Menampilkan ${visibleCount} artikel kategori ${categoryName}`;
                            filterResults.textContent = message;
                        }
                        
                        // Announce to screen readers
                        button.focus();
                    });
                    
                    // Handle keyboard navigation
                    button.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            button.click();
                        }
                    });
                });
                
                // Newsletter form accessibility
                const newsletterForm = document.querySelector('form[aria-label*="newsletter"]');
                const newsletterStatus = document.getElementById('newsletter-status');
                
                newsletterForm?.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const email = e.target.querySelector('input[type="email"]').value;
                    
                    // Simulate subscription (replace with actual API call)
                    if (newsletterStatus) {
                        newsletterStatus.textContent = `Berhasil berlangganan dengan email ${email}. Terima kasih!`;
                    }
                    
                    // Reset form
                    e.target.reset();
                    
                    // Focus back to form for screen readers
                    setTimeout(() => {
                        e.target.querySelector('input[type="email"]').focus();
                    }, 2000);
                });
                
                // Enhanced keyboard navigation for article cards
                articles.forEach(article => {
                    const links = article.querySelectorAll('a, button');
                    links.forEach(link => {
                        link.addEventListener('focus', () => {
                            article.classList.add('ring-2', 'ring-primary', 'ring-offset-2');
                        });
                        
                        link.addEventListener('blur', () => {
                            article.classList.remove('ring-2', 'ring-primary', 'ring-offset-2');
                        });
                    });
                });
                
                // Skip link functionality
                const skipLink = document.createElement('a');
                skipLink.href = '#articles';
                skipLink.textContent = 'Langsung ke konten artikel';
                skipLink.className = 'sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-primary text-white px-4 py-2 z-50';
                document.body.insertBefore(skipLink, document.body.firstChild);
            });
                        // Remove active state from all buttons
                        categoryButtons.forEach(btn => {
                            btn.classList.remove('scale-110');
                        });
                        
                        // Add active state to clicked button
                        button.classList.add('scale-110');
                        
                        // Here you would filter articles based on category
        </script>
    </body>
</html>
